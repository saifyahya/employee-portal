<div class="home-container">
   
  
    <div class="employees-data">
      <div class="employees-search">
        <div class="total-employees">
          <span class="total-emp">{{usersCount}} <span class="usersCount">total employees </span></span>
        </div>

        <input type="text" placeholder="Search Employee" [(ngModel)]="searchedEmployee" (input)="searchEmployeeByName()">

        <select [(ngModel)]="selected_department" (change)="changeCollectedUsers()">
          <option *ngFor="let depart of departments" [ngValue]="depart">{{depart}}</option>
        </select>
        
      </div>
  
      <div class="employees-table">
        <table>
          <thead>
            <tr>
              <th>Employee Name</th>
              <th>Email</th>
              <th>Department</th>
              <th>Position</th>
              <th>Joining Date</th>
              <th> Latest Checkin </th>
              <th> Latest Checkout </th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            <!-- Example rows; replace with dynamic content -->
            <tr *ngFor="let user of users">
              <td (click)="goToAttendanceOfEmployee(user.name,user.email)" class="employee-checkins">{{user.name}}</td>
              <td>{{user.email}}</td>
              <td>{{formatDepartmentEnums(user.department)}}</td>
              <td>{{user.position}}</td>
              <td>{{user.joiningDate.toString()}}</td>
              <td>{{getFirstPunchTime(user)[0] || ""}} <br> {{getFirstPunchTime(user)[1]}} </td>
              <td>{{getlastPunchTime(user)[0] || ""}} <br> {{getlastPunchTime(user)[1]}} </td>
              <td (click)="openDeleteModal(user.email)" class="employee-delete">delete user Account</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
  <hr>
  <button class="view-charts" (click)="toggleViewCharts($event)">View Employees Working Hours Charts</button>


  <ng-template #deleteModal let-modal>
    <div class="modal-header">
        <h4 class="modal-title">Removing User</h4>
    </div>
    <div class="modal-body">

        <p>Remove User : {{userToDelete}}</p>

        <div class="alert alert-success" *ngIf="userDeletedSuccess"> {{userDeletedSuccess}}</div>
        <div *ngIf="userNotDeleted" class="alert alert-danger"> {{userNotDeleted}}</div>

    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="modal.close(); userToDelete=''; userDeletedSuccess='';userNotDeleted=''">Close</button>
        <button type="button" class="btn btn-primary" (click)="deleteUser()">Delete</button>
    </div>
</ng-template>



<ng-container *ngIf="viewCharts">
  <app-calender></app-calender>
</ng-container>


  